# 字体控制功能实现说明

## 功能概述

为AI写作助手的编辑器增加了字体控制功能，包括字体大小、颜色、加粗、斜体、下划线等基本文本格式化功能。

## 实现的功能

### 1. 文本样式控制
- **加粗**：为选中文本添加/移除加粗标签
- **斜体**：为选中文本添加/移除斜体标签
- **下划线**：为选中文本添加/移除下划线标签
- 支持组合使用多种样式
- 智能识别已存在的标签，避免重复添加

### 2. 格式清除
- 一键清除所有文本格式
- 恢复默认样式状态

### 3. 格式化预览
- 实时预览HTML标签的格式化效果
- 使用真正的HTML渲染，显示加粗、斜体、下划线等效果
- 可切换显示/隐藏预览区域
- 预览模式下隐藏所有样式设置工具栏，专注查看效果

## 技术实现

### 状态管理
```typescript
// 字体控制状态
const showPreview = ref<boolean>(false)
```

**注意**：文本样式控制（加粗、斜体、下划线）不再使用状态变量，而是直接操作选中文本的HTML标签。

### 样式应用
- **文本样式**：通过HTML标签直接插入到选中的文本中，支持标签的添加和移除
- **格式化预览**：使用v-html指令渲染真正的HTML格式化效果

```vue
<!-- 文本样式通过HTML标签实现 -->
<strong>加粗文本</strong>
<em>斜体文本</em>
<u>下划线文本</u>

<!-- 格式化预览 -->
const formatPreviewContent = computed<string>(() => {
  // 直接返回HTML内容，让v-html渲染真正的格式化效果
  return content.value
})
```

### 事件处理
- `@click="toggleBold"`：为选中文本添加/移除加粗标签
- `@click="toggleItalic"`：为选中文本添加/移除斜体标签
- `@click="toggleUnderline"`：为选中文本添加/移除下划线标签
- `@click="togglePreview"`：切换格式化预览显示

## 用户界面

### 工具栏布局
字体控制工具栏位于编辑器顶部，包含：
1. 文本样式按钮组（加粗、斜体、下划线）
2. 格式清除按钮
3. 格式化预览切换按钮

### 预览模式
- **编辑模式**：显示完整的字体控制工具栏
- **预览模式**：隐藏所有样式设置，显示简洁的预览工具栏
- 预览工具栏包含模式提示和"返回编辑"按钮

### 预览区域
- 位于工具栏下方，可切换显示/隐藏
- 实时显示HTML标签的格式化效果
- 使用真正的HTML渲染，显示加粗、斜体、下划线等视觉效果
- 预览模式下使用特殊的视觉设计，突出显示效果

### 样式设计
- 使用浅灰色背景（#f8f9fa）
- 圆角边框设计
- 轻微阴影效果
- 响应式布局，支持移动端

## 使用方法

1. **应用文本样式**：
   - 选中要格式化的文本
   - 点击加粗、斜体、下划线按钮
   - 再次点击相同按钮可移除该格式
2. **清除格式**：选中要清除格式的文本，点击"清除格式"按钮
3. **查看格式化效果**：点击"显示预览"按钮查看格式化后的效果

## 注意事项

1. **文本样式**：只对选中的文本应用格式，通过HTML标签实现
2. **智能标签管理**：自动识别已存在的标签，避免重复添加
3. **格式清除**：只清除选中文本的HTML标签，不影响其他内容
4. **字体控制与AI功能完全兼容**：AI功能会处理包含HTML标签的文本
5. **选择文本要求**：使用文本样式功能前必须先选中文本

## 未来扩展

可以考虑添加以下功能：
- 字体大小控制
- 字体颜色控制
- 字体族选择（如Arial、Times New Roman等）
- 文本对齐方式控制
- 行高调整
- 段落间距控制
- 样式预设模板

## 技术架构

- **前端框架**：Vue 3 + TypeScript
- **UI组件库**：Element Plus
- **状态管理**：Vue Composition API
- **样式处理**：CSS + 动态样式绑定
- **响应式设计**：支持桌面端和移动端 