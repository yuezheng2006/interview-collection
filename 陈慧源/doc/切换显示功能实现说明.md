# 切换显示功能实现说明

## 功能概述

实现了真正的编辑模式和预览模式切换功能，两种模式互斥显示，不会同时出现。同时实现了固定底部按钮，提供更好的用户体验。

## 核心特性

### 1. 互斥显示切换
- **编辑模式**：显示完整的编辑界面，包括工具栏、AI功能、文本编辑器
- **预览模式**：显示预览界面，包括预览工具栏、格式化预览区域
- **切换逻辑**：使用`v-if`指令实现互斥显示，确保不会同时显示两个模式

### 2. 固定底部按钮
- 保存和返回首页按钮固定在页面底部
- 使用CSS固定定位，始终可见
- 为编辑器内容添加底部边距，避免被按钮遮挡

### 3. 智能状态管理
- 通过`showPreview`状态控制模式切换
- 工具栏和内容区域同步切换
- 保持用户操作的一致性

## 技术实现

### 1. 条件渲染结构
```vue
<!-- 编辑模式工具栏 -->
<div class="font-control-toolbar" v-if="!showPreview">
  <!-- 完整的字体控制工具 -->
</div>

<!-- 预览模式工具栏 -->
<div class="preview-toolbar" v-if="showPreview">
  <!-- 简洁的预览工具 -->
</div>

<!-- 编辑模式内容 -->
<div v-if="!showPreview">
  <!-- AI功能按钮和文本编辑器 -->
</div>

<!-- 预览模式内容 -->
<div v-if="showPreview" class="format-preview">
  <!-- 格式化预览区域 -->
</div>
```

### 2. 状态控制逻辑
```typescript
const showPreview = ref<boolean>(false)

function togglePreview() {
  showPreview.value = !showPreview.value
}
```

### 3. CSS固定定位
```css
.editor-actions-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  border-top: 2px solid #667eea;
  padding: 16px;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  display: flex;
  gap: 12px;
  justify-content: center;
  align-items: center;
}
```

## 用户界面设计

### 1. 编辑模式界面
- **顶部**：字体控制工具栏（文本样式、清除格式、显示预览）
- **中部**：AI功能按钮区域（选中文本时显示）
- **主体**：文本编辑器（支持格式化、AI功能）
- **底部**：固定操作按钮（保存、返回首页）

### 2. 预览模式界面
- **顶部**：预览模式工具栏（模式提示、返回编辑按钮）
- **主体**：格式化预览区域（显示HTML标签效果）
- **底部**：固定操作按钮（保存、返回首页）

### 3. 切换按钮设计
- **显示预览**：蓝色主题，图标为眼睛
- **返回编辑**：白色主题，图标为编辑笔

## 交互流程

### 1. 进入预览模式
1. 用户在编辑模式下点击"显示预览"按钮
2. 编辑模式工具栏淡出隐藏
3. 编辑内容区域淡出隐藏
4. 预览模式工具栏淡入显示
5. 预览内容区域淡入显示
6. 界面切换到预览模式

### 2. 预览模式体验
- 隐藏所有编辑相关的工具和内容
- 突出显示格式化后的文本效果
- 提供清晰的模式提示信息
- 简化操作，专注内容查看

### 3. 返回编辑模式
1. 用户点击"返回编辑"按钮
2. 预览模式工具栏淡出隐藏
3. 预览内容区域淡出隐藏
4. 编辑模式工具栏淡入显示
5. 编辑内容区域淡入显示
6. 界面切换回编辑模式

## 布局优化

### 1. 内容区域管理
```css
.editor-content {
  flex: 1;
  margin-bottom: 16px;
  padding-bottom: 80px; /* 为固定底部按钮留出空间 */
}
```

### 2. 固定按钮样式
```css
.editor-actions-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  border-top: 2px solid #667eea;
  padding: 16px;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
  z-index: 1000;
}
```

### 3. 响应式适配
```css
@media (max-width: 768px) {
  .editor-actions-fixed {
    padding: 12px;
  }
  
  .editor-actions-fixed .el-button {
    min-width: 100px;
    height: 36px;
    font-size: 13px;
  }
}
```

## 性能优化

### 1. 条件渲染
- 使用`v-if`而不是`v-show`，避免不必要的DOM渲染
- 切换模式时及时清理不需要的元素
- 减少页面元素数量，提升性能

### 2. 状态同步
- 预览内容与编辑内容实时同步
- 使用计算属性避免重复计算
- 响应式更新，提升用户体验

### 3. 内存管理
- 切换模式时及时清理不需要的DOM元素
- 避免内存泄漏和性能问题
- 优化大型文档的切换性能

## 用户体验优化

### 1. 模式切换
- **清晰的状态指示**：用户明确知道当前处于哪种模式
- **一键切换**：简单的按钮操作，无需复杂设置
- **状态保持**：切换模式时保持所有设置和内容

### 2. 专注体验
- **减少干扰**：预览模式下隐藏不必要的工具
- **突出内容**：增强预览区域的视觉重要性
- **简化操作**：只保留必要的功能按钮

### 3. 视觉反馈
- **模式识别**：不同的颜色主题和样式
- **状态提示**：清晰的文字说明和图标
- **操作引导**：明确的按钮标签和功能

## 兼容性考虑

### 1. 浏览器支持
- 使用标准的CSS定位属性
- 支持主流浏览器
- 优雅降级处理

### 2. 设备兼容
- 支持桌面端和移动端
- 响应式布局适配不同屏幕
- 触摸设备友好

### 3. 功能兼容
- 与现有编辑器功能完全兼容
- 不影响AI功能的使用
- 保持功能完整性

## 使用示例

### 1. 基本模式切换
1. 在编辑模式下，看到完整的编辑界面
2. 点击"显示预览"按钮
3. 界面切换到预览模式，编辑内容被隐藏
4. 点击"返回编辑"按钮
5. 界面切换回编辑模式，预览内容被隐藏

### 2. 固定按钮使用
1. 在任何模式下，底部按钮始终可见
2. 滚动页面时，按钮保持在底部
3. 点击保存按钮，保存当前文档
4. 点击返回首页按钮，返回主页

### 3. 响应式体验
1. 在不同屏幕尺寸下，布局自动适配
2. 移动端上，按钮大小和间距适当调整
3. 保持良好的触摸操作体验

## 未来改进方向

### 1. 动画增强
- 添加模式切换的过渡动画
- 支持淡入淡出效果
- 添加滑动切换动画

### 2. 快捷键支持
- 支持键盘快捷键切换模式
- 添加模式切换的快捷方式
- 支持自定义快捷键设置

### 3. 多模式支持
- 支持更多显示模式（如打印模式、导出模式）
- 实现模式间的快速切换
- 支持模式组合使用

### 4. 个性化设置
- 支持用户自定义模式切换行为
- 添加模式偏好设置
- 支持模式切换历史记录 